<% const cdn = theme.cdn.head %>
<% if(theme.verify.baidu){%>
    <meta name="baidu-site-verification" content="<%- theme.verify.baidu %>" />
<%} %>
<% if(theme.loading.pace){ %>
    <script data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}" src="<%= cdn.pacejs %>"></script>
<% } %>
<%- css(theme.icon.customicon) %>
<%- css(cdn.scoicon) %>
<%- css(cdn.snackbarcss) %>
<% if(theme.comment.enable){ %>
    <%- css('/css/commentBarrage') %>
    <%- js(cdn.twikoojs) %>
<% } %>
<% if(theme.thirdparty.search.algolia_search.enable){ %>
    <%- js(cdn.instantsearch) %>
    <%- js(cdn.algolia) %>
<% } %>
<script type="text/javascript" src="/js/utils.js"></script>
<script>
    (win=> {
            win.saveToLocal = {
                set: function setWithExpiry(key, value, ttl) {
                    if (ttl === 0)
                        return
                    const now = new Date()
                    const expiryDay = ttl * 86400000
                    const item = {
                        value: value,
                        expiry: now.getTime() + expiryDay,
                    }
                    localStorage.setItem(key, JSON.stringify(item))
                },

                get: function getWithExpiry(key) {
                    const itemStr = localStorage.getItem(key)

                    if (!itemStr) {
                        return undefined
                    }
                    const item = JSON.parse(itemStr)
                    const now = new Date()

                    if (now.getTime() > item.expiry) {
                        localStorage.removeItem(key)
                        return undefined
                    }
                    return item.value
                }
            }
        }
    )(window)
</script>